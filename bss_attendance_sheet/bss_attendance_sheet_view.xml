<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    
       <record id="view_attendance_sheet_filter" model="ir.ui.view">
            <field name="name">bss_attendance_sheet.sheet.select</field>
            <field name="model">bss_attendance_sheet.sheet</field>
            <field name="arch" type="xml">
                <search string="Search Attendance Sheet">
                	<filter icon="terp-go-month" string="This Month" name="this_month" domain="[('month','=',time.strftime('%%Y-%%m'))]" />
                	<filter icon="terp-go-today" string="Hide Today" name="hide_today" domain="[('name','&lt;',time.strftime('%%Y-%%m-%%d'))]" />
                	<filter icon="terp-go-today" string="This Month and Hide Today" name="this_month_and_hide_today" 
                			domain="[('month','=',time.strftime('%%Y-%%m')),('name','&lt;',time.strftime('%%Y-%%m-%%d'))]" />
                    <field name="employee_id"/>
                    <group expand="0" string="Group By...">
                        <filter name="group_employee" string="Employee" icon="terp-personal" domain="[]" context="{'group_by':'employee_id'}"/>
                        <filter string="Month" icon="terp-go-month" domain="[]" context="{'group_by':'month'}"/>
                    </group>
               </search>
            </field>
        </record>
	
	    <record id="view_attendance_sheet_form" model="ir.ui.view">
            <field name="name">bss_attendance_sheet.sheet.form</field>
            <field name="model">bss_attendance_sheet.sheet</field>
            <field name="arch" type="xml">
            	<form string="" version="7.0">
	                <sheet string="" >
		        		<group colspan="4" col="3">
			        		<group col="1">
			                	<h1><field name="name" /></h1>
			                	<h3><field name="employee_id" nolabel="1" /></h3>
			        		</group>
		        		
			        		<group col="2">
			        			<field name="total_attendance" widget="float_time" />
			        			<field name="total_midday" widget="float_time" />
			        			<field name="total_break" widget="float_time" />
			        		</group>
			        		
			        		<group col="2">
			        			<field name="expected_time" widget="float_time" />
			        			<field name="total_recorded" widget="float_time" />
			        			<field name="time_difference" widget="float_time" />
			        			<separator orientation="horizontal" colspan="2" />
			        			<field name="cumulative_difference" widget="float_time" />
			        		</group>
		        		</group>
	
						<separator string="Log" />
		        		<field name="attendance_ids" colspan="4" nolabel="1" /> 
	        		</sheet>
        		</form>            
            </field>
        </record>	

	    <record id="view_attendance_sheet_tree" model="ir.ui.view">
            <field name="name">bss_attendance_sheet.sheet.tree</field>
            <field name="model">bss_attendance_sheet.sheet</field>
            <field name="arch" type="xml">
            	<tree string="" colors="grey:total_attendance==0 and expected_time==0;darkgreen:time_difference&gt;=0;darkred:time_difference&lt;0;">
	        		<field name="month" invisible="1"/>
	        		<field name="day_of_week" />
	        		<field name="name" />
	        		<field name="employee_id" />
	        		<field name="total_attendance" widget="float_time" />
	        		<field name="total_recorded" widget="float_time" />
	        		<field name="holidays_time" widget="float_time" />  
	        		<field name="expected_time" widget="float_time" />  
	        		<field name="time_difference" widget="float_time" />
	        		<field name="cumulative_difference" widget="float_time" />
        		</tree>               
            </field>
        </record>	

        <record model="ir.actions.act_window" id="action_hr_attendance_report">
            <field name="name">My Attendances</field>
            <field name="res_model">bss_attendance_sheet.sheet</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('employee_id.user_id', '=', uid)]</field>
            <field name="context">{'search_default_this_month':1}</field>
        </record>
        
        <record model="ir.actions.act_window" id="action_hr_attendance_manager_report">
            <field name="name">Attendances Analysis</field>
            <field name="res_model">bss_attendance_sheet.sheet</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[]</field>
            <field name="context">{'search_default_this_month_and_hide_today':1, 'search_default_group_employee':1}</field>
        </record>

        <menuitem
            name="My Attendances" 
            id="menu_hr_attendance_report_tree" 
            action="action_hr_attendance_report" 
            parent="hr.menu_hr_reporting" sequence="4" />
            
        <menuitem
            name="Attendances Analysis" 
            id="menu_hr_attendance_manager_report_tree" 
            action="action_hr_attendance_manager_report" 
            parent="hr.menu_hr_reporting" sequence="4" 
            groups="base.group_hr_user,base.group_hr_manager" />

    </data>
</openerp>


