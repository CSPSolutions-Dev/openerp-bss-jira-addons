<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
	
		<!-- Visit -->
        <record id="edit_visit" model="ir.ui.view">
            <field name="name">bss_visit_report.visit</field>
            <field name="model">bss_visit_report.visit</field>
            <field name="arch" type="xml">
                <form string="Project" version="7.0">
                <header>
                	<button name="action_validate" string="Validate" type="object"
                            states="draft" groups="base.group_user" class="oe_highlight" />
                	<button name="action_terminate" string="Terminate" type="object"
                            states="pending" groups="base.group_user" class="oe_highlight" />
                	<button name="action_reopen" string="Re-open" type="object"
                            states="terminated" groups="base.group_user" />
                    <field name="state" widget="statusbar" statusbar_colors='{"draft":"blue"}' readonly="1" />
                </header>
                <sheet string="Visit">
                    <div class="oe_title">
                        <h1>
                        	<label string="Visit Report" class="oe_inline" />
                            <field name="ref" nolabel="True" class="oe_inline" />
                        </h1>
                        <h3>
                        	<field name="customer_id" nolabel="True" />
                        </h3>
                    </div>
                    <group>
	                    <group>
	                   		<field name="project_id" on_change="onchange_project_id(project_id)" />
	                   		<field name="user_id" />
	                   		<field name="date" />
	                   		<field name="linked_task_id" states="pending,terminated" />
	                   	</group>
	               		<group attrs="{'invisible': [('state', '=', 'draft')]}">
	               			<label for="hour_from" string="Attendance" />
	               			<span>
		               			<field name="hour_from" widget="float_time" class="oe_inline" />
		               			<label string="-" class="oe_inline" />
		               			<field name="hour_to" widget="float_time" class="oe_inline" />
	               			</span>
	                		<field name="time" widget="float_time" />    
	                     	<field name="travel_time" widget="float_time" />
	                     	<field name="travel_zone" />
	                    </group>
                    </group>
                    <group name="tasks" string="Tasks">
                        <field name="task_ids" nolabel="1" />
                    </group>
                </sheet>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_visit_management">
            <field name="name">Visits</field>
            <field name="res_model">bss_visit_report.visit</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
        </record>

        <menuitem
            name="Visits" 
            id="menu_visit_management" 
            action="action_visit_management" 
            parent="bss_visit_report.menu_visit_report" sequence="1" />

	</data>
</openerp>